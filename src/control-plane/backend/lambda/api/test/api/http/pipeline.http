POST {{HOST}}/api/pipeline
Content-Type: application/json
X-Click-Stream-Request-Id: 605e367e-3fd8-fhhg-jkyi-dsgrgfdsfsdf

{
  "projectId": "ec74bc97-58e9-43f4-ba7d-a153c10d8e62",
  "name": "Pipeline-01",
  "description": "Description of Pipeline-01",
  "region": "us-east-1",
  "dataCollectionSDK": "Clickstream SDK",
  "tags": [
    {
      "key": "name",
      "value": "clickstream"
    }
  ],
  "ingestionServer": {
    "network": {
      "vpcId": "vpc-0ba32b04ccc029088",
      "publicSubnetIds": ["subnet-09ae522e85bbee5c5", "subnet-09ae522e85bbee5c5", "subnet-09ae522e85bbee5c5"],
      "privateSubnetIds": ["subnet-09ae522e85bbee5c5", "subnet-09ae522e85bbee5c5", "subnet-09ae522e85bbee5c5"]
    },
    "size": {
      "serverMin": 2,
      "serverMax": 4,
      "warmPoolSize": 1,
      "scaleOnCpuUtilizationPercent": 50
    },
    "domain": {
      "hostedZoneId": "Z000000000000000000E",
      "hostedZoneName": "fake.test.dev.com",
      "recordName": "click"
    },
    "loadBalancer": {
      "serverEndpointPath": "/collect",
      "serverCorsOrigin": "*",
      "protocol": "HTTPS",
      "enableApplicationLoadBalancerAccessLog": true,
      "logS3Bucket": "Pipeline-01-log",
      "logS3Prefix": "logs",
      "notificationsTopicArn": "arn:aws:sns:us-east-1:012345678912:test"
    },
    "sinkType": "s3",
    "sinkS3": {
      "s3DataBucket": "s3://012345678912-test",
      "s3DataPrefix": "test",
      "s3BufferSize": 50,
      "s3BufferInterval": 30
    }
  },
  "etl": {},
  "dataModel": {}
}

###
GET {{HOST}}/api/pipeline
Accept: application/json

###
GET {{HOST}}/api/pipeline/8ffa10ad-4643-4de0-bd27-989564eee5eb?pid=b66e82de-0f4d-43c3-93d8-d1956d40cc6a
Accept: application/json

###

PUT {{HOST}}/api/pipeline/8ffa10ad-4643-4de0-bd27-989564eee5eb
Content-Type: application/json

{
  "projectId": "b66e82de-0f4d-43c3-93d8-d1956d40cc6a",
  "version": "1677557813463",
  "dataCollectionSDK": "Clickstream SDK",
  "updateAt": 1677557813463,
  "pipelineId": "8ffa10ad-4643-4de0-bd27-989564eee5eb",
  "operator": "111",
  "name": "Pipeline-01111",
  "ingestionServer": {
    "sinkType": "s3",
    "sinkS3": {
      "s3Uri": "s3://012345678912-test",
      "sinkType": "s3",
      "s3prefix": "test",
      "s3BufferSize": 50,
      "s3BufferInterval": 30
    },
    "size": {
      "serverMax": 4,
      "warmPoolSize": 1,
      "serverMin": 2,
      "scaleOnCpuUtilizationPercent": 50
    },
    "loadBalancer": {
      "protocol": "HTTPS",
      "enableApplicationLoadBalancerAccessLog": "Yes",
      "logS3Prefix": "logs111",
      "logS3Bucket": "Pipeline-01-log111",
      "notificationsTopicArn": "arn:aws:sns:us-east-1:012345678912:test",
      "serverCorsOrigin": "*",
      "serverEndpointPath": "/collect"
    },
    "network": {
      "publicSubnetIds": "subnet-09ae522e85bbee5c5,subnet-09ae522e85bbee5c5,subnet-09ae522e85bbee5c5",
      "vpcId": "vpc-0ba32b04ccc029088",
      "privateSubnetIds": "subnet-09ae522e85bbee5c5,subnet-09ae522e85bbee5c5,subnet-09ae522e85bbee5c5"
    },
    "domain": {
      "hostedZoneId": "Z000000000000000000E",
      "hostedZoneName": "fake.test.dev.com",
      "recordName": "click"
    }
  },
  "deleted": false,
  "createAt": 1677557813463,
  "region": "us-east-1",
  "description": "Description of Pipeline-01",
  "etl": {},
  "dataModel": {},
  "tags": [
    {
      "value": "clickstream",
      "key": "name"
    }
  ]
}

###

DELETE {{HOST}}/api/pipeline/75ba69d4-f011-434b-8757-e640d312da79?pid=571f8ab0-7b18-474c-9905-3cc4ddd5179f
Accept: application/json
