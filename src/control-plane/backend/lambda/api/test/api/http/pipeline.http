POST {{HOST}}/api/pipeline
Content-Type: application/json
X-Click-Stream-Request-Id: 605e367e-3fd8-4c59-8be5-e81869011110

{
  "projectId": "b66e82de-0f4d-43c3-93d8-d1956d40cc6a",
  "name": "Pipeline-01",
  "description": "Description of Pipeline-01",
  "region": "us-east-1",
  "dataCollectionSDK": "Clickstream SDK",
  "tags": [
    {
      "key": "name",
      "value": "clickstream"
    }
  ],
  "ingestionServer": {
    "network": {
      "vpcId": "vpc-0ba32b04ccc029088",
      "publicSubnetIds": "subnet-09ae522e85bbee5c5,subnet-09ae522e85bbee5c5,subnet-09ae522e85bbee5c5",
      "privateSubnetIds": "subnet-09ae522e85bbee5c5,subnet-09ae522e85bbee5c5,subnet-09ae522e85bbee5c5"
    },
    "size": {
      "serverMin": 2,
      "serverMax": 4,
      "warmPoolSize": 1,
      "scaleOnCpuUtilizationPercent": 50
    },
    "domain": {
      "hostedZoneId": "Z08525975JO576HL6S9E",
      "hostedZoneName": "mingfeiq.people.aws.dev",
      "recordName": "click"
    },
    "loadBalancer": {
      "serverEndpointPath": "/collect",
      "serverCorsOrigin": "*",
      "protocol": "HTTPS",
      "enableApplicationLoadBalancerAccessLog": "Yes",
      "logS3Bucket": "Pipeline-01-log",
      "logS3Prefix": "logs",
      "notificationsTopicArn": "arn:aws:sns:us-east-1:615633583142:test"
    },
    "sink": {
      "sinkType": "s3",
      "s3Uri": "s3://615633583142-test",
      "s3prefix": "test",
      "s3BufferSize": 50,
      "s3BufferInterval": 30
    }
  },
  "etl": {},
  "dataModel": {}
}

###
GET {{HOST}}/api/pipeline/53b4c78e-975e-4deb-b3f9-27fcad2600a3?pid=b66e82de-0f4d-43c3-93d8-d1956d40cc6a
Accept: application/json

###

PUT {{HOST}}/api/pipeline/53b4c78e-975e-4deb-b3f9-27fcad2600a3
Content-Type: application/json

{
  "projectId": "b66e82de-0f4d-43c3-93d8-d1956d40cc6a",
  "version": "1677486028147",
  "dataCollectionSDK": "Clickstream SDK",
  "updateAt": 1677486028147,
  "pipelineId": "53b4c78e-975e-4deb-b3f9-27fcad2600a3",
  "operator": "",
  "name": "Pipeline-01",
  "ingestionServer": {
    "size": {
      "serverMax": 4,
      "warmPoolSize": 1,
      "serverMin": 2,
      "scaleOnCpuUtilizationPercent": 50
    },
    "loadBalancer": {
      "protocol": "HTTPS",
      "enableApplicationLoadBalancerAccessLog": "Yes",
      "logS3Prefix": "logs",
      "logS3Bucket": "Pipeline-01-log",
      "notificationsTopicArn": "arn:aws:sns:us-east-1:615633583142:test",
      "serverCorsOrigin": "*",
      "serverEndpointPath": "/collect"
    },
    "sink": {
      "s3Uri": "s3://615633583142-test",
      "sinkType": "s3",
      "s3prefix": "test",
      "s3BufferSize": 50,
      "s3BufferInterval": 30
    },
    "network": {
      "publicSubnetIds": "subnet-09ae522e85bbee5c5,subnet-09ae522e85bbee5c5,subnet-09ae522e85bbee5c5",
      "vpcId": "vpc-0ba32b04ccc029088",
      "privateSubnetIds": "subnet-09ae522e85bbee5c5,subnet-09ae522e85bbee5c5,subnet-09ae522e85bbee5c5"
    },
    "domain": {
      "hostedZoneId": "Z08525975JO576HL6S9E",
      "hostedZoneName": "mingfeiq.people.aws.dev",
      "recordName": "click"
    }
  },
  "deleted": false,
  "createAt": 1677486028147,
  "region": "us-east-1",
  "description": "Description of Pipeline-01",
  "etl": {},
  "dataModel": {},
  "tags": [
    {
      "value": "clickstream",
      "key": "name"
    }
  ]
}

###

DELETE {{HOST}}/api/pipeline/75ba69d4-f011-434b-8757-e640d312da79?pid=571f8ab0-7b18-474c-9905-3cc4ddd5179f
Accept: application/json
